{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// import {Player} from './Player'\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Game extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    label: cc.Label = null;\r\n    @property\r\n    text: string = 'hello';\r\n\r\n    //引用星星的预制资源\r\n    @property(cc.Prefab)\r\n    private starPrefab:cc.Prefab = null;\r\n    \r\n    @property(cc.Prefab)\r\n    private gameoverPrefab:cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    private buttonPrefab:cc.Prefab = null;\r\n\r\n    @property(cc.Label)\r\n    private scoreLab:cc.Label = null;\r\n    //星星的消失时间范围\r\n    @property(cc.Integer)\r\n    private minStarDuration:number = 0;\r\n    @property(cc.Integer)\r\n    private maxStarDuration:number = 0;\r\n    //地面节点\r\n    @property(cc.Node)\r\n    private ground:cc.Node = null;\r\n    //角色节点\r\n    @property(cc.Node)\r\n    public player:cc.Node = null;\r\n\r\n    //地面y轴坐标\r\n    private groundY:number;\r\n    //定时器\r\n    public timer:number;\r\n    //星星存在的持续时间\r\n    public starDuration:number;\r\n    //当前分数\r\n    private score:number;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        // this.groundY = this.ground.y;\r\n        this.timer = 0;\r\n        this.starDuration = 0;\r\n        //生成新星星\r\n        this.newStar();\r\n        this.score = 0;\r\n    }\r\n    //生成新星星\r\n    public newStar(){\r\n        let newstar = cc.instantiate(this.starPrefab);\r\n        this.node.addChild(newstar);\r\n        newstar.setPosition(this.getNewStarPosition());\r\n        // newstar.getComponent('Star').game = this;\r\n        newstar.getComponent('Star').init(this);\r\n        this.starDuration = this.minStarDuration + cc.random0To1() * (this.maxStarDuration - this.minStarDuration);\r\n        this.timer = 0;\r\n    }\r\n    //新星星的位置\r\n    public getNewStarPosition(){\r\n        let ranX = 0;\r\n        let ranY = this.ground.y + cc.random0To1() * this.player.getComponent('Player').jumpHeight;\r\n        let maxX = this.node.width/2;\r\n        ranX = cc.randomMinus1To1() * maxX;\r\n        return cc.v2(ranX,ranY);\r\n    }\r\n    // start () {}\r\n\r\n    update (dt:number) {\r\n        if(this.timer > this.starDuration){\r\n            this.gameover();\r\n            return;\r\n        }\r\n        this.timer += dt;\r\n    }\r\n    public gainscore(){\r\n        this.score += 1;\r\n        this.scoreLab.string = 'score:' + this.score.toString();\r\n    }\r\n    public gameover(){\r\n        this.player.stopAllActions();\r\n        let gameoverlab = cc.instantiate(this.gameoverPrefab);\r\n        this.node.addChild(gameoverlab);\r\n        gameoverlab.color = cc.color(241,0,29);\r\n        let playbutton = cc.instantiate(this.buttonPrefab);\r\n        this.node.addChild(playbutton);\r\n        playbutton.color = cc.color(0,153,255);\r\n        playbutton.on('click',this.callback,this);\r\n        // cc.director.loadScene('myfir');\r\n    }\r\n    private callback(){\r\n        cc.director.loadScene('myfir');\r\n    }\r\n}\r\n"]}