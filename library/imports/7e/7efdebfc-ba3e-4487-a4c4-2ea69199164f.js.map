{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Star.ts"],"names":[],"mappings":";;;;;AAEM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAAkC,wBAAY;IAD9C;QAAA,qEA0CC;QAtCG,WAAK,GAAa,IAAI,CAAC;QAEvB,UAAI,GAAW,OAAO,CAAC;QAGf,gBAAU,GAAU,CAAC,CAAC;QACtB,UAAI,GAAQ,IAAI,CAAC;;IAgC7B,CAAC;IA9BU,mBAAI,GAAX,UAAY,IAAS;QACjB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACrB,CAAC;IACD,gCAAiB,GAAjB;QACI,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;QAC/C,IAAI,IAAI,GAAG,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAC,SAAS,CAAC,CAAC;QACtD,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,uBAAQ,GAAR;QACI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;QACpB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;QACtB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IAED,wBAAwB;IAExB,eAAe;IAEf,cAAc;IAEd,qBAAM,GAAN,UAAQ,EAAS;QACb,IAAG,IAAI,CAAC,iBAAiB,EAAE,GAAG,IAAI,CAAC,UAAU,EAAC;YAC1C,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,OAAO;SACV;QACD,IAAI,YAAY,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC;QAC9D,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,CAAC,GAAG,GAAG,UAAU,CAAC,CAAC,CAAC;IACnF,CAAC;IArCD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;uCACI;IAEvB;QADC,QAAQ;sCACc;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;4CACS;IARb,IAAI;QADxB,OAAO;OACa,IAAI,CAyCxB;IAAD,WAAC;CAzCD,AAyCC,CAzCiC,EAAE,CAAC,SAAS,GAyC7C;kBAzCoB,IAAI","file":"","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["import {Game} from './Game'\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Star extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    label: cc.Label = null;\r\n    @property\r\n    text: string = 'hello';\r\n\r\n    @property(cc.Integer)\r\n    private pickRadius:number = 0;\r\n    private game:Game = null;\r\n\r\n    public init(game:Game){\r\n        this.game = game;\r\n    }\r\n    getPlayerDistance(){\r\n        let playerPos = this.game.player.getPosition();\r\n        let dist = cc.pDistance(this.node.position,playerPos);\r\n        return dist;\r\n    }\r\n\r\n    onPicked(){\r\n        this.game.newStar();\r\n        this.game.gainscore();\r\n        this.node.destroy();\r\n    }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    // start () {}\r\n\r\n    update (dt:number) {\r\n        if(this.getPlayerDistance() < this.pickRadius){\r\n            this.onPicked();\r\n            return;\r\n        }\r\n        let opacityRatio = 1 - this.game.timer/this.game.starDuration;\r\n        let minOpacity = 50;\r\n        this.node.opacity = minOpacity + Math.floor(opacityRatio * (255 - minOpacity));\r\n    }\r\n}\r\n"]}